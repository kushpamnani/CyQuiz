<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StringReqActivity.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debug</a> &gt; <a href="index.source.html" class="el_package">com.example.androidexample</a> &gt; <span class="el_source">StringReqActivity.java</span></div><h1>StringReqActivity.java</h1><pre class="source lang-java linenums">package com.example.androidexample;

import static android.text.TextUtils.indexOf;
import static android.text.TextUtils.lastIndexOf;
import static android.text.TextUtils.substring;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import com.android.volley.Request;
import com.android.volley.Response;
import com.android.volley.VolleyError;
import com.android.volley.VolleyLog;
import com.android.volley.toolbox.StringRequest;

import org.json.JSONObject;
import org.w3c.dom.Text;

import java.util.HashMap;
import java.util.Map;

/**
 * area where information is gotten via a GET
 */
<span class="nc" id="L30">public class StringReqActivity extends JsonObjReqActivity {</span>
    /**
     * sends a string req
     */
    private Button btnStringReq;
    /**
     * shows what the server sent back
     */
    private TextView msgResponse;

    /**
     * shows text, testing variable
     */
    private TextView TestText;
    /**
     * gets the ID the user enters
     */
    private TextView GetID;
    /**
     * selected if you are searching a teacher not a student
     */
    private Button chipTeacher;
    /**
     * keeps track of if ID is taken
     */
<span class="nc" id="L55">    private  boolean idTaken = false;</span>

<span class="nc" id="L57">    private boolean nameTaken = false;</span>

<span class="nc" id="L59">    private boolean passwordTaken = false;</span>

<span class="nc" id="L61">    private boolean classroomInfoTaken = false;</span>

<span class="nc" id="L63">    private boolean classID1Taken = false;</span>

<span class="nc" id="L65">    private boolean classID2Taken = false;</span>

<span class="nc" id="L67">    private boolean classNameTaken = false;</span>

<span class="nc" id="L69">    private String classID1 = &quot;&quot;;</span>

<span class="nc" id="L71">    private String classID2 = &quot;&quot;;</span>

<span class="nc" id="L73">    private String className = &quot;&quot;;</span>

<span class="nc" id="L75">    private String HelperString = &quot;&quot;;</span>

<span class="nc" id="L77">    private String classCode = &quot;&quot;;</span>

<span class="nc" id="L79">    private String teacherID = &quot;&quot;;</span>

<span class="nc" id="L81">    private String teacherName = &quot;&quot;;</span>

<span class="nc" id="L83">    private String teacherIsActive = &quot;&quot;;</span>

<span class="nc" id="L85">    private String studentIsActive = &quot;&quot;;</span>

<span class="nc" id="L87">    private boolean classCodeTaken = false;</span>

<span class="nc" id="L89">    private boolean teacherIDTaken = false;</span>

<span class="nc" id="L91">    private boolean teacherNameTaken = false;</span>

<span class="nc" id="L93">    private boolean teachIsActTaken = false;</span>

<span class="nc" id="L95">    private boolean studentIsActTaken = false;</span>








   //private static final String URL_STRING_REQ = &quot;https://bb1bfe69-3299-49d4-8006-e8e24e5faf63.mock.pstmn.io/GetTest2/&quot;;
    /**
     * the base URL for the server
      */
    public static final String URL_STRING_REQ = &quot;http://coms-309-031.class.las.iastate.edu:8080&quot;;
       //public static final String URL_STRING_REQ = &quot;https://d34095c7-496f-4dc3-8497-9d514eef0c4c.mock.pstmn.io/ScanTest/&quot;;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
<span class="nc" id="L113">        super.onCreate(savedInstanceState);</span>
<span class="nc" id="L114">        setContentView(R.layout.activity_string_req);</span>


<span class="nc" id="L117">        btnStringReq = (Button) findViewById(R.id.btnStringReq);</span>
<span class="nc" id="L118">        msgResponse = (TextView) findViewById(R.id.msgResponse);</span>
<span class="nc" id="L119">        TestText = (TextView) findViewById(R.id.textView2);</span>
<span class="nc" id="L120">        GetID = findViewById(R.id.IDGet);</span>
<span class="nc" id="L121">        chipTeacher = findViewById(R.id.teacherChip);</span>

<span class="nc" id="L123">        btnStringReq.setOnClickListener(new View.OnClickListener() {</span>
            @Override
            public void onClick(View v) {
<span class="nc" id="L126">                makeStringReq();</span>
<span class="nc" id="L127">            }</span>
        });
<span class="nc" id="L129">        chipTeacher.setOnClickListener(new View.OnClickListener() {</span>
            @Override
            public void onClick(View v) {
<span class="nc bnc" id="L132" title="All 2 branches missed.">                chipTeacher.setActivated(!chipTeacher.isActivated());</span>
<span class="nc" id="L133">            }</span>
        });

<span class="nc" id="L136">    }</span>


    /**
     * Making string request
     **/
    private void makeStringReq() {
<span class="nc" id="L143">    String TestUrl = URL_STRING_REQ;</span>
<span class="nc bnc" id="L144" title="All 2 branches missed.">    if (chipTeacher.isActivated()){</span>
<span class="nc" id="L145">        TestUrl = TestUrl + &quot;/teachers/&quot;;</span>
    }
    else {
<span class="nc" id="L148">        TestUrl = TestUrl + &quot;/users/&quot;;</span>
    }
<span class="nc" id="L150">    TestUrl = TestUrl + GetID.getText().toString();</span>
<span class="nc" id="L151">        StringRequest stringRequest = new StringRequest(</span>
                Request.Method.GET,
                TestUrl,
<span class="nc" id="L154">                new Response.Listener&lt;String&gt;() {</span>
                    @Override
                    public void onResponse(String response) {
<span class="nc" id="L157">                        Log.d(&quot;Volley Response&quot;, response);</span>
<span class="nc" id="L158">                        msgResponse.setText(response.toString());</span>

<span class="nc" id="L160">                         HelperString = response.toString();</span>
<span class="nc" id="L161">                         int length = HelperString.length();</span>

<span class="nc" id="L163">                        String Answer = &quot;&quot;;</span>
<span class="nc" id="L164">                        int counter = 0;</span>


<span class="nc" id="L167">                        String ID = &quot;&quot;;</span>
<span class="nc" id="L168">                        String name = &quot;&quot;;</span>
<span class="nc" id="L169">                        String password = &quot;&quot;;</span>


<span class="nc bnc" id="L172" title="All 2 branches missed.">                        for (int i = 0; i &lt; length; i++){</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">                            if (!idTaken) {</span>
<span class="nc bnc" id="L174" title="All 4 branches missed.">                                if (HelperString.charAt(i) == ':' || HelperString.charAt(i) == ',') {</span>
<span class="nc" id="L175">                                    counter++;</span>
<span class="nc bnc" id="L176" title="All 2 branches missed.">                                } else if (counter == 1) {</span>


<span class="nc" id="L179">                                    ID = ID + HelperString.charAt(i);</span>


                                }
<span class="nc bnc" id="L183" title="All 2 branches missed.">                                if (counter == 2) {</span>
<span class="nc" id="L184">                                    counter = 0;</span>
<span class="nc" id="L185">                                    idTaken = true;</span>
                                }
                            }

<span class="nc bnc" id="L189" title="All 2 branches missed.">                            else if (!nameTaken){</span>
<span class="nc bnc" id="L190" title="All 2 branches missed.">                                if (HelperString.charAt(i) == '\&quot;') {</span>
<span class="nc" id="L191">                                    counter++;</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">                                } else if (counter == 3) {</span>


<span class="nc" id="L195">                                    name = name + HelperString.charAt(i);</span>


                                }
<span class="nc bnc" id="L199" title="All 2 branches missed.">                                if (counter == 4) {</span>
<span class="nc" id="L200">                                    counter = 0;</span>
<span class="nc" id="L201">                                    nameTaken = true;</span>
                                }
                            }
<span class="nc bnc" id="L204" title="All 2 branches missed.">                            else if (!passwordTaken){</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">                                if (HelperString.charAt(i) == '\&quot;') {</span>
<span class="nc" id="L206">                                    counter++;</span>
<span class="nc bnc" id="L207" title="All 2 branches missed.">                                } else if (counter == 3) {</span>


<span class="nc" id="L210">                                    password = password + HelperString.charAt(i);</span>


                                }
<span class="nc bnc" id="L214" title="All 2 branches missed.">                                if (counter == 4) {</span>
<span class="nc" id="L215">                                    counter = 0;</span>
<span class="nc" id="L216">                                    passwordTaken = true;</span>
                                }
                            }
<span class="nc bnc" id="L219" title="All 2 branches missed.">                            else if (!classroomInfoTaken){</span>
<span class="nc" id="L220">                               classScanner();</span>
<span class="nc" id="L221">                               counter = 0;</span>

                            }
<span class="nc bnc" id="L224" title="All 2 branches missed.">                            else if (!studentIsActTaken){</span>
<span class="nc bnc" id="L225" title="All 2 branches missed.">                                if (HelperString.charAt(i) == ']' ) {</span>


<span class="nc bnc" id="L228" title="All 2 branches missed.">                                    for (int j = i; j &lt; length; j++){</span>
<span class="nc bnc" id="L229" title="All 4 branches missed.">                                        if (HelperString.charAt(j) == '\n' || HelperString.charAt(j) == '&quot;'){</span>
<span class="nc" id="L230">                                            counter++;</span>
                                        }

<span class="nc bnc" id="L233" title="All 2 branches missed.">                                            if (counter == 3){</span>
<span class="nc" id="L234">                                            studentIsActive = studentIsActive + HelperString.charAt(j + 3);</span>
                                        }








<span class="nc bnc" id="L244" title="All 2 branches missed.">                                        if (counter == 4) {</span>
<span class="nc" id="L245">                                            counter = 0;</span>

<span class="nc" id="L247">                                            studentIsActTaken = true;</span>


                                        }
                                    }


                                }

                            }





                        }

<span class="nc bnc" id="L264" title="All 2 branches missed.">                         for (int i = 0; i &lt; length; i++){</span>
<span class="nc bnc" id="L265" title="All 2 branches missed.">                             if (HelperString.charAt(i) == '\&quot;') {</span>
<span class="nc" id="L266">                                counter++;</span>
                             }
<span class="nc bnc" id="L268" title="All 2 branches missed.">                               else if (counter == 3) {</span>


<span class="nc" id="L271">                                       Answer = Answer + HelperString.charAt(i);</span>


                               }
<span class="nc bnc" id="L275" title="All 2 branches missed.">                             if (counter == 4){</span>
<span class="nc" id="L276">                                 counter = 0;</span>
                             }
                         }

<span class="nc" id="L280">                        TestText.setText(&quot;ID is: &quot; + ID);</span>

<span class="nc" id="L282">                    }</span>
                },


<span class="nc" id="L286">                new Response.ErrorListener() {</span>
                    @Override
                    public void onErrorResponse(VolleyError error) {
                        // Handle any errors that occur during the request
<span class="nc" id="L290">                        Log.e(&quot;Volley Error&quot;, error.toString());</span>
<span class="nc" id="L291">                    }</span>
                }
<span class="nc" id="L293">        ) {</span>
            @Override
            public Map&lt;String, String&gt; getHeaders() {
<span class="nc" id="L296">                Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();</span>
//                headers.put(&quot;Authorization&quot;, &quot;Bearer YOUR_ACCESS_TOKEN&quot;);
//                headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);
<span class="nc" id="L299">                return headers;</span>
            }

            @Override
            protected Map&lt;String, String&gt; getParams() {
<span class="nc" id="L304">                Map&lt;String, String&gt; params = new HashMap&lt;&gt;();</span>
//                params.put(&quot;param1&quot;, &quot;value1&quot;);
//                params.put(&quot;param2&quot;, &quot;value2&quot;);
<span class="nc" id="L307">                return params;</span>
            }
        };


        // Adding request to request queue
<span class="nc" id="L313">        VolleySingleton.getInstance(getApplicationContext()).addToRequestQueue(stringRequest);</span>
<span class="nc" id="L314">    }</span>
    /**
     * helper method to scan a string returned (will be fixed)

     */
    public void classScanner() {
<span class="nc" id="L320">        int length = HelperString.length();</span>
<span class="nc" id="L321">        int counter = 0;</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">        for (int i = 0; i &lt; length; i++) {</span>
<span class="nc bnc" id="L323" title="All 2 branches missed.">            if (HelperString.charAt(i) == '[') {</span>

<span class="nc bnc" id="L325" title="All 2 branches missed.">                for (int j = i; j &lt; length; j++) {</span>
<span class="nc bnc" id="L326" title="All 2 branches missed.">                    if (!classID1Taken){</span>
<span class="nc bnc" id="L327" title="All 4 branches missed.">                    if (HelperString.charAt(j) == ':' || HelperString.charAt(j) == ',') {</span>
<span class="nc" id="L328">                        counter++;</span>
<span class="nc bnc" id="L329" title="All 2 branches missed.">                    } else if (counter == 1) {</span>


<span class="nc" id="L332">                        classID1 = classID1 + HelperString.charAt(j);</span>


                    }
<span class="nc bnc" id="L336" title="All 2 branches missed.">                    if (counter == 2) {</span>
<span class="nc" id="L337">                        counter = 0;</span>

<span class="nc" id="L339">                        classID1Taken = true;</span>


                    }
                    }
<span class="nc bnc" id="L344" title="All 2 branches missed.">                    else if (!classID2Taken){</span>
<span class="nc bnc" id="L345" title="All 4 branches missed.">                        if (HelperString.charAt(j) == ':' || HelperString.charAt(j) == ',') {</span>
<span class="nc" id="L346">                            counter++;</span>
<span class="nc bnc" id="L347" title="All 2 branches missed.">                        } else if (counter == 2) {</span>


<span class="nc" id="L350">                            classID2 = classID2 + HelperString.charAt(j);</span>


                        }
<span class="nc bnc" id="L354" title="All 2 branches missed.">                        if (counter == 3) {</span>
<span class="nc" id="L355">                            counter = 0;</span>

<span class="nc" id="L357">                            classID2Taken = true;</span>


                        }
                    }
<span class="nc bnc" id="L362" title="All 2 branches missed.">                    else if (!classNameTaken){</span>
<span class="nc bnc" id="L363" title="All 2 branches missed.">                        if (HelperString.charAt(j) == '\&quot;') {</span>
<span class="nc" id="L364">                            counter++;</span>
<span class="nc bnc" id="L365" title="All 2 branches missed.">                        } else if (counter == 3) {</span>


<span class="nc" id="L368">                            className = className + HelperString.charAt(j);</span>


                        }
<span class="nc bnc" id="L372" title="All 2 branches missed.">                        if (counter == 4) {</span>
<span class="nc" id="L373">                            counter = 0;</span>
<span class="nc" id="L374">                            classNameTaken = true;</span>
                        }
                    }
<span class="nc bnc" id="L377" title="All 2 branches missed.">                    else if (!classCodeTaken){</span>
<span class="nc bnc" id="L378" title="All 4 branches missed.">                        if (HelperString.charAt(j) == ':' || HelperString.charAt(j) == ',') {</span>
<span class="nc" id="L379">                            counter++;</span>
<span class="nc bnc" id="L380" title="All 2 branches missed.">                        } else if (counter == 2) {</span>


<span class="nc" id="L383">                            classCode = classCode + HelperString.charAt(j);</span>


                        }
<span class="nc bnc" id="L387" title="All 2 branches missed.">                        if (counter == 3) {</span>
<span class="nc" id="L388">                            counter = 0;</span>

<span class="nc" id="L390">                            classCodeTaken = true;</span>


                        }
                    }
<span class="nc bnc" id="L395" title="All 2 branches missed.">                    else if (!teacherIDTaken){</span>
<span class="nc bnc" id="L396" title="All 4 branches missed.">                        if (HelperString.charAt(j) == ':' || HelperString.charAt(j) == ',') {</span>
<span class="nc" id="L397">                            counter++;</span>
<span class="nc bnc" id="L398" title="All 2 branches missed.">                        } else if (counter == 2) {</span>


<span class="nc" id="L401">                            teacherID = teacherID + HelperString.charAt(j);</span>


                        }
<span class="nc bnc" id="L405" title="All 2 branches missed.">                        if (counter == 3) {</span>
<span class="nc" id="L406">                            counter = 0;</span>

<span class="nc" id="L408">                            teacherIDTaken = true;</span>


                        }
                    }
<span class="nc bnc" id="L413" title="All 2 branches missed.">                    else if (!teacherNameTaken){</span>
<span class="nc bnc" id="L414" title="All 2 branches missed.">                        if (HelperString.charAt(j) == '\&quot;') {</span>
<span class="nc" id="L415">                            counter++;</span>
<span class="nc bnc" id="L416" title="All 2 branches missed.">                        } else if (counter == 3) {</span>


<span class="nc" id="L419">                            teacherName = teacherName + HelperString.charAt(j);</span>


                        }
<span class="nc bnc" id="L423" title="All 2 branches missed.">                        if (counter == 4) {</span>
<span class="nc" id="L424">                            counter = 0;</span>
<span class="nc" id="L425">                            teacherNameTaken = true;</span>
                        }
                    }
<span class="nc bnc" id="L428" title="All 2 branches missed.">                    else if (!teachIsActTaken){</span>
<span class="nc bnc" id="L429" title="All 4 branches missed.">                        if (HelperString.charAt(j) == ':' || HelperString.charAt(j) == '\n') {</span>
<span class="nc" id="L430">                            counter++;</span>
<span class="nc bnc" id="L431" title="All 2 branches missed.">                        } else if (counter == 2) {</span>

<span class="nc" id="L433">                                teacherIsActive = teacherIsActive + HelperString.charAt(j);</span>




                        }
<span class="nc bnc" id="L439" title="All 2 branches missed.">                        if (counter == 3) {</span>
<span class="nc" id="L440">                            counter = 0;</span>

<span class="nc" id="L442">                            teachIsActTaken = true;</span>


                        }
                    }


                }

            }
        }
<span class="nc" id="L453">        classroomInfoTaken = true;</span>

<span class="nc" id="L455">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.0</div></body></html>